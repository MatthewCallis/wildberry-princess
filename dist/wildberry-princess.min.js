"use strict";var asyncGenerator=function(){function e(e){this.value=e}function t(t){function i(s,a){try{var l=t[s](a),o=l.value;o instanceof e?Promise.resolve(o.value).then(function(e){i("next",e)},function(e){i("throw",e)}):n(l.done?"return":"normal",l.value)}catch(e){n("throw",e)}}function n(e,t){switch(e){case"return":s.resolve({value:t,done:!0});break;case"throw":s.reject(t);break;default:s.resolve({value:t,done:!1})}(s=s.next)?i(s.key,s.arg):a=null}var s,a;this._invoke=function(e,t){return new Promise(function(n,l){var o={key:e,arg:t,resolve:n,reject:l,next:null};a?a=a.next=o:(s=a=o,i(e,t))})},"function"!=typeof t.return&&(this.return=void 0)}return"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)},{wrap:function(e){return function(){return new t(e.apply(this,arguments))}},await:function(t){return new e(t)}}}(),classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),WildberryPrincess=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};classCallCheck(this,e),this.trackUserActions=this.trackUserActions.bind(this),this.clickHandler=this.clickHandler.bind(this),this.trackEvent=this.trackEvent.bind(this),this.trackPageView=this.trackPageView.bind(this),this.trackEcommerce=this.trackEcommerce.bind(this),this.set=this.set.bind(this),this.identify=this.identify.bind(this),this.clearIdentity=this.clearIdentity.bind(this);var i={useGoogleAnalytics:!0,useKissMetrics:!0,useFullStory:!0,useSegment:!0,useCustomerio:!0};this.settings=Object.assign({},i,t)}return createClass(e,[{key:"trackUserActions",value:function(e,t,i,n,s){var a={category:t,action:i||"Click"};n&&(a.label=n),s&&(a.value=s);for(var l=document.querySelectorAll(e),o=0,r=[];o<l.length;)l[o].data={eventParams:a},l[o].removeEventListener("click",this.clickHandler),l[o].addEventListener("click",this.clickHandler,!1),r.push(o++)}},{key:"clickHandler",value:function(e){if(null!=e){var t=e.target;if(null!=t){var i=t.data.eventParams,n=i.label?i.label:this.getLabel(t);if(this.settings.useGoogleAnalytics){var s={hitType:"event",eventCategory:i.category,eventAction:i.action};n&&(s.eventLabel=n),i.value&&(s.eventValue=i.value),this.sendPayloadGA(s)}if(this.settings.useKissMetrics){var a={category:i.category,action:i.action};n&&(a.label=n),i.value&&(a.value=i.value),this.trackEventKM(i.category+": "+n+" ("+i.action+")",a)}}}}},{key:"trackEvent",value:function(e,t,i,n){if(this.settings.useGoogleAnalytics&&this.trackEventGA(e,t,i,n),this.settings.useKissMetrics){var s={category:e,action:t};i&&(s.label=i),n&&(s.value=n),this.trackEventKM(e+": "+i+" ("+t+")",s)}if(this.settings.useSegment){var a={category:e};i&&(a.label=i),n&&(a.value=n),this.trackEventSegment(t,a)}if(this.settings.useCustomerio){var l={category:e};i&&(l.label=i),n&&(l.value=n),this.trackEventCustomerio(t,l)}}},{key:"trackPageView",value:function(e,t){e||(e=window.location.pathname),t||(t=document.title);var i={hitType:"pageview",page:e,title:t};this.settings.useGoogleAnalytics&&this.sendPayloadGA(i)}},{key:"trackEcommerce",value:function(e,t){null!=window.ga&&this.settings.useGoogleAnalytics&&window.ga("ecommerce:"+e,t)}},{key:"set",value:function(e,t){this.settings.useGoogleAnalytics&&this.setGA(e,t),this.settings.useKissMetrics&&this.setKM(e,t)}},{key:"identify",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:"anonymous"};this.settings.useGoogleAnalytics&&"anonymous"!==e.id&&this.setGA("userId",e.id),this.settings.useKissMetrics&&this.sendPayloadKM("identify",e.id),this.settings.useFullStory&&null!=window.FS&&"anonymous"!==e.id&&window.FS.identify(e.id,{displayName:e.name,email:e.email}),this.settings.useSegment&&"anonymous"!==e.id&&null!=window.analytics&&window.analytics.identify(e.id,{name:e.name,email:e.email}),this.settings.useCustomerio&&"anonymous"!==e.id&&null!=window._cio&&window._cio.identify({id:e.id,name:e.name,email:e.email})}},{key:"clearIdentity",value:function(){this.settings.useKissMetrics&&this.sendPayloadKM("clearIdentity")}},{key:"getLabel",value:function(e){return e.getAttribute("data-event-label")}},{key:"trackEventGA",value:function(e,t,i,n){var s={hitType:"event",eventCategory:e,eventAction:t};i&&(s.eventLabel=i),n&&(s.eventValue=n),this.sendPayloadGA(s)}},{key:"trackEventKM",value:function(e,t){this.sendPayloadKM("record",e,t)}},{key:"trackEventSegment",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};null!=window.analytics&&window.analytics.track(e,t,i)}},{key:"trackEventCustomerio",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};null!=window._cio&&window._cio.track(e,t)}},{key:"setGA",value:function(e,t){null!=window.ga&&window.ga("set",e,t)}},{key:"setKM",value:function(e,t){var i={};i[e]=t,this.sendPayloadKM("set",i,null)}},{key:"sendPayloadGA",value:function(e){null!=window.ga&&window.ga("send",e)}},{key:"sendPayloadKM",value:function(e,t,i){if(null!=window._kmq){var n=[e];t&&n.push(t),i&&n.push(i),window._kmq.push(n)}}}]),e}();module.exports=WildberryPrincess;var classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),WildberryPrincess=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};classCallCheck(this,e),this.trackUserActions=this.trackUserActions.bind(this),this.clickHandler=this.clickHandler.bind(this),this.trackEvent=this.trackEvent.bind(this),this.trackPageView=this.trackPageView.bind(this),this.trackEcommerce=this.trackEcommerce.bind(this),this.set=this.set.bind(this),this.identify=this.identify.bind(this),this.clearIdentity=this.clearIdentity.bind(this);var i={useGoogleAnalytics:!0,useKissMetrics:!0,useFullStory:!0,useSegment:!0,useCustomerio:!0};this.settings=Object.assign({},i,t)}return createClass(e,[{key:"trackUserActions",value:function(e,t,i,n,s){var a={category:t,action:i||"Click"};n&&(a.label=n),s&&(a.value=s);for(var l=document.querySelectorAll(e),o=0,r=[];o<l.length;)l[o].data={eventParams:a},l[o].removeEventListener("click",this.clickHandler),l[o].addEventListener("click",this.clickHandler,!1),r.push(o++)}},{key:"clickHandler",value:function(e){if(null!=e){var t=e.target;if(null!=t){var i=t.data.eventParams,n=i.label?i.label:this.getLabel(t);if(this.settings.useGoogleAnalytics){var s={hitType:"event",eventCategory:i.category,eventAction:i.action};n&&(s.eventLabel=n),i.value&&(s.eventValue=i.value),this.sendPayloadGA(s)}if(this.settings.useKissMetrics){var a={category:i.category,action:i.action};n&&(a.label=n),i.value&&(a.value=i.value),this.trackEventKM(i.category+": "+n+" ("+i.action+")",a)}}}}},{key:"trackEvent",value:function(e,t,i,n){if(this.settings.useGoogleAnalytics&&this.trackEventGA(e,t,i,n),this.settings.useKissMetrics){var s={category:e,action:t};i&&(s.label=i),n&&(s.value=n),this.trackEventKM(e+": "+i+" ("+t+")",s)}if(this.settings.useSegment){var a={category:e};i&&(a.label=i),n&&(a.value=n),this.trackEventSegment(t,a)}if(this.settings.useCustomerio){var l={category:e};i&&(l.label=i),n&&(l.value=n),this.trackEventCustomerio(t,l)}}},{key:"trackPageView",value:function(e,t){e||(e=window.location.pathname),t||(t=document.title);var i={hitType:"pageview",page:e,title:t};this.settings.useGoogleAnalytics&&this.sendPayloadGA(i)}},{key:"trackEcommerce",value:function(e,t){null!=window.ga&&this.settings.useGoogleAnalytics&&window.ga("ecommerce:"+e,t)}},{key:"set",value:function(e,t){this.settings.useGoogleAnalytics&&this.setGA(e,t),this.settings.useKissMetrics&&this.setKM(e,t)}},{key:"identify",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:"anonymous"};this.settings.useGoogleAnalytics&&"anonymous"!==e.id&&this.setGA("userId",e.id),this.settings.useKissMetrics&&this.sendPayloadKM("identify",e.id),this.settings.useFullStory&&null!=window.FS&&"anonymous"!==e.id&&window.FS.identify(e.id,{displayName:e.name,email:e.email}),this.settings.useSegment&&"anonymous"!==e.id&&null!=window.analytics&&window.analytics.identify(e.id,{name:e.name,email:e.email}),this.settings.useCustomerio&&"anonymous"!==e.id&&null!=window._cio&&window._cio.identify({id:e.id,name:e.name,email:e.email})}},{key:"clearIdentity",value:function(){this.settings.useKissMetrics&&this.sendPayloadKM("clearIdentity")}},{key:"getLabel",value:function(e){return e.getAttribute("data-event-label")}},{key:"trackEventGA",value:function(e,t,i,n){var s={hitType:"event",eventCategory:e,eventAction:t};i&&(s.eventLabel=i),n&&(s.eventValue=n),this.sendPayloadGA(s)}},{key:"trackEventKM",value:function(e,t){this.sendPayloadKM("record",e,t)}},{key:"trackEventSegment",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};null!=window.analytics&&window.analytics.track(e,t,i)}},{key:"trackEventCustomerio",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};null!=window._cio&&window._cio.track(e,t)}},{key:"setGA",value:function(e,t){null!=window.ga&&window.ga("set",e,t)}},{key:"setKM",value:function(e,t){var i={};i[e]=t,this.sendPayloadKM("set",i,null)}},{key:"sendPayloadGA",value:function(e){null!=window.ga&&window.ga("send",e)}},{key:"sendPayloadKM",value:function(e,t,i){if(null!=window._kmq){var n=[e];t&&n.push(t),i&&n.push(i),window._kmq.push(n)}}}]),e}();module.exports=WildberryPrincess;var classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),WildberryPrincess=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};classCallCheck(this,e),this.trackUserActions=this.trackUserActions.bind(this),this.clickHandler=this.clickHandler.bind(this),this.trackEvent=this.trackEvent.bind(this),this.trackPageView=this.trackPageView.bind(this),this.trackEcommerce=this.trackEcommerce.bind(this),this.set=this.set.bind(this),this.identify=this.identify.bind(this),this.clearIdentity=this.clearIdentity.bind(this);var i={useGoogleAnalytics:!0,useKissMetrics:!0};this.settings=Object.assign({},i,t)}return createClass(e,[{key:"trackUserActions",value:function(e,t,i,n,s){var a={category:t,action:i||"Click"};n&&(a.label=n),s&&(a.value=s);for(var l=document.querySelectorAll(e),o=0,r=[];o<l.length;)l[o].data={eventParams:a},l[o].removeEventListener("click",this.clickHandler),l[o].addEventListener("click",this.clickHandler,!1),r.push(o++)}},{key:"clickHandler",value:function(e){if(null!=e){var t=e.target;if(null!=t){var i=t.data.eventParams,n=i.label?i.label:this.getLabel(t);if(this.settings.useGoogleAnalytics){var s={hitType:"event",eventCategory:i.category,eventAction:i.action};n&&(s.eventLabel=n),i.value&&(s.eventValue=i.value),this.sendPayloadGA(s)}if(this.settings.useKissMetrics){var a={category:i.category,action:i.action};n&&(a.label=n),i.value&&(a.value=i.value),this.trackEventKM(i.category+": "+n+" ("+i.action+")",a)}}}}},{key:"trackEvent",value:function(e,t,i,n){if(this.settings.useGoogleAnalytics&&this.trackEventGA(e,t,i,n),this.settings.useKissMetrics){var s={category:e,action:t};i&&(s.label=i),n&&(s.value=n),this.trackEventKM(e+": "+i+" ("+t+")",s)}}},{key:"trackPageView",value:function(e,t){e||(e=window.location.pathname),t||(t=document.title);var i={hitType:"pageview",page:e,title:t};this.settings.useGoogleAnalytics&&this.sendPayloadGA(i)}},{key:"trackEcommerce",value:function(e,t){null!=window.ga&&this.settings.useGoogleAnalytics&&window.ga("ecommerce:"+e,t)}},{key:"set",value:function(e,t){this.settings.useGoogleAnalytics&&this.setGA(e,t),this.settings.useKissMetrics&&this.setKM(e,t)}},{key:"identify",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"anonymous";this.settings.useGoogleAnalytics&&"anonymous"!==e&&this.setGA("userId",e),this.settings.useKissMetrics&&this.sendPayloadKM("identify",e)}},{key:"clearIdentity",value:function(){this.settings.useKissMetrics&&this.sendPayloadKM("clearIdentity")}},{key:"getLabel",value:function(e){return e.getAttribute("data-event-label")}},{key:"trackEventGA",value:function(e,t,i,n){var s={hitType:"event",eventCategory:e,eventAction:t};i&&(s.eventLabel=i),n&&(s.eventValue=n),this.sendPayloadGA(s)}},{key:"trackEventKM",value:function(e,t){this.sendPayloadKM("record",e,t)}},{key:"setGA",value:function(e,t){null!=window.ga&&window.ga("set",e,t)}},{key:"setKM",value:function(e,t){var i={};i[e]=t,this.sendPayloadKM("set",i,null)}},{key:"sendPayloadGA",value:function(e){null!=window.ga&&window.ga("send",e)}},{key:"sendPayloadKM",value:function(e,t,i){if(null!=window._kmq){var n=[e];t&&n.push(t),i&&n.push(i),window._kmq.push(n)}}}]),e}();module.exports=WildberryPrincess;